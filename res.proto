syntax = "proto3";

package wire;
import "google/protobuf/struct.proto";
option go_package = "./wire";

enum Status {
    OK = 0;
    ERR = 1;
}

message Result {
    Status status = 1;
    string message = 2;
    google.protobuf.Struct attrs = 3;
    oneof response {
        HANDSHAKERes HANDSHAKERes = 10;
        GETRes GETRes = 11;
        SETRes SETRes = 12;
        KEYSRes KEYSRes = 13;
        ZRANGERes ZRANGERes = 21;
    }
}

message Value {
    oneof value {
        bool nil = 1;
        string str = 2;
        int64 i64 = 3;
        bytes bytes = 4;
        double f64 = 5;
    }
}

message HANDSHAKERes {
}

message GETRes {
    Value value = 1;
}

message SETRes {
    bool ok = 1;
}

message KEYSRes {
    repeated string keys = 1;
}

message ZElement {
    int64 score = 1;
    string member = 2;
}

message ZRANGERes {
    repeated ZElement elements = 1;
}
